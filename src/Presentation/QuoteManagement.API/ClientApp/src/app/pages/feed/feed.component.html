
<div class="feed-container">
  <div class="feed-header">
    <h1 class="feed-title">Quote Feed</h1>
    <p class="feed-subtitle">Discover inspiring quotes shared by our community</p>
  </div>

  <p-toast position="top-right"></p-toast>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div *ngFor="let item of [1,2,3]" class="quote-skeleton">
      <p-card class="quote-card">
        <div class="user-info">
          <p-skeleton shape="circle" size="3rem"></p-skeleton>
          <div class="user-details">
            <p-skeleton width="120px" height="1.2rem"></p-skeleton>
            <p-skeleton width="100px" height="1rem"></p-skeleton>
          </div>
        </div>
        <p-divider></p-divider>
        <div class="quote-content">
          <p-skeleton width="100%" height="4rem"></p-skeleton>
          <div class="quote-meta">
            <p-skeleton width="80px" height="1rem"></p-skeleton>
            <p-skeleton width="120px" height="1rem"></p-skeleton>
          </div>
        </div>
        <p-divider></p-divider>
        <div class="quote-actions">
          <p-skeleton width="60px" height="2rem"></p-skeleton>
          <p-skeleton width="60px" height="2rem"></p-skeleton>
          <p-skeleton width="60px" height="2rem"></p-skeleton>
        </div>
      </p-card>
    </div>
  </div>

  <!-- Feed Content -->
  <div *ngIf="!loading" class="feed-content">
    <p-dataView 
      [value]="feedData" 
      layout="list"
      [paginator]="false"
      [rows]="10">
      <ng-template pTemplate="list" let-quote>
        <div class="quote-item">
          <p-card class="quote-card">
            <!-- User Information -->
            <div class="user-info">
              <p-avatar 
                [label]="quote.user.name.charAt(0)" 
                size="large"
                shape="circle"
                [style]="{'background-color': getAvatarColor(quote.user.name), 'color': '#ffffff'}">
              </p-avatar>
              <div class="user-details">
                <h3 class="user-name">{{ quote.user.name }}</h3>
                <span class="user-nickname">{{ quote.user.nickname }}</span>
                <span class="quote-date">{{ getRelativeTime(quote.createdAt) }}</span>
              </div>
            </div>

            <p-divider></p-divider>

            <!-- Quote Content -->
            <div class="quote-content">
              <blockquote class="quote-text">
                "{{ quote.quoteText }}"
              </blockquote>
              
              <div class="quote-meta">
                <div class="quote-attribution">
                  <p-tag 
                    [value]="quote.author" 
                    severity="info" 
                    icon="pi pi-user"
                    class="author-tag">
                  </p-tag>
                  <p-tag 
                    [value]="quote.bookName" 
                    severity="secondary" 
                    icon="pi pi-book"
                    class="book-tag">
                  </p-tag>
                </div>
              </div>
            </div>

            <p-divider></p-divider>

            <!-- Quote Actions -->
            <div class="quote-actions">
              <p-button
                [icon]="quote.isLiked ? 'pi pi-heart-fill' : 'pi pi-heart'"
                [label]="quote.likes.toString()"
                [severity]="quote.isLiked ? 'danger' : 'secondary'"
                [outlined]="!quote.isLiked"
                size="small"
                (click)="onLikeQuote(quote)"
                class="action-button like-button">
              </p-button>

              <p-button
                icon="pi pi-share-alt"
                label="Share"
                severity="info"
                outlined
                size="small"
                (click)="onShareQuote(quote)"
                class="action-button share-button">
              </p-button>

              <p-button
                icon="pi pi-copy"
                label="Copy"
                severity="secondary"
                outlined
                size="small"
                (click)="onCopyQuote(quote)"
                class="action-button copy-button">
              </p-button>
            </div>
          </p-card>
        </div>
      </ng-template>
    </p-dataView>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && feedData.length === 0" class="empty-state">
    <div class="empty-content">
      <i class="pi pi-inbox empty-icon"></i>
      <h3>No quotes yet</h3>
      <p>Be the first to share an inspiring quote!</p>
      <p-button 
        label="Add Quote" 
        icon="pi pi-plus" 
        severity="primary">
      </p-button>
    </div>
  </div>
</div>
